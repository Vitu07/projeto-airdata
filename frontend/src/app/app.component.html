<main style="padding: 2rem; font-family: sans-serif; max-width: 800px; margin: auto;">
  <h1>{{ title }}</h1>
  <p>Projeto AIRDATA</p>

  <hr>

  <div class="busca-container">
    <label for="cidade"><strong>Consulte a qualidade do ar em sua cidade:</strong></label>
    <br>
    <input id="cidade" type="text" [(ngModel)]="cidadeInput" (keyup.enter)="buscarQualidadeDoAr()" placeholder="Ex: São Paulo, Rio de Janeiro...">
    <button (click)="buscarQualidadeDoAr()" [disabled]="isLoading">
      {{ isLoading ? 'Buscando...' : 'Buscar Dados' }}
    </button>
  </div>

  <hr>

  <div class="resultado-container">
    <div *ngIf="isLoading">
      <p>Carregando...</p>
    </div>

    <div *ngIf="errorMessage">
      <p style="color: red;"><strong>Erro:</strong> {{ errorMessage }}</p>
    </div>

    <div *ngIf="airQualityData as aqiData">

      <div *ngIf="aqiData.dadosApiExterna">
        <h2>Resultados para: {{ aqiData.dadosApiExterna.city.name }}</h2>
        <p><em>Leitura de: {{ aqiData.dadosApiExterna.time.s | date: 'dd/MM/yyyy HH:mm' }}</em></p>

        <h3>Índice de Qualidade do Ar (AQI):
          <strong style="font-size: 1.5em;">
            {{ aqiData.dadosApiExterna.aqi }}
          </strong>
          <span *ngIf="aqiData.classificacaoRisco"
                class="classificacao-texto"
                [ngClass]="formatCssClass(aqiData.classificacaoRisco)">
            ({{ aqiData.classificacaoRisco }})
          </span>
        </h3>
        <p>Poluente dominante: <strong>{{ aqiData.dadosApiExterna.dominentpol }}</strong></p>

        <div *ngIf="aqiData.recomendacoes && aqiData.recomendacoes.length > 0" style="margin-top: 1.5rem; border-top: 1px solid #ccc; padding-top: 1rem;">
          <h4>Recomendações de Saúde:</h4>
          <ul style="padding-left: 20px;">
            <li *ngFor="let rec of aqiData.recomendacoes" style="margin-bottom: 8px;">
              {{ rec }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</main>

<router-outlet></router-outlet>
